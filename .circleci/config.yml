version: 2
jobs:
  build:
    machine: true
    working_directory: ~/project
    environment:
      - DEBIAN_FRONTEND: "noninteractive"
    steps:
      - checkout
      - run:
          name: "Install Vagrant and spit up VM."
          command: |
            wget https://releases.hashicorp.com/vagrant/1.9.5/vagrant_1.9.5_x86_64.deb
            wget http://download.virtualbox.org/virtualbox/5.1.22/virtualbox-5.1_5.1.22-115126~Ubuntu~trusty_amd64.deb
            sudo apt-get update -y && sudo apt-get upgrade -y
            sudo apt-get install -y linux-headers-4.4.0-53-generic linux-headers-generic
            sudo dpkg -i virtualbox-5.1_5.1.22-115126~Ubuntu~trusty_amd64.deb
            sudo dpkg -i vagrant_1.9.5_x86_64.deb
            vagrant --version
            vagrant init ubuntu/trusty64
            vagrant up
            vagrant status
      - run:
          name: "See Python versions"
          command: |
            dpkg -l | grep python
