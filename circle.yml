general:
  artifacts:
  #  - /var/log/upstart/docker.log
machine:
  services:
    - docker
  #  - cassandra
  environment:
    #MY_EVAR: cat circle-docker-test/test.txt
  php:
    version: 7.0.4
#  java:
#    version: jdk1.8.0
  post:
  #  - sudo chmod +r /var/log/upstart/docker.log
    - ls -la .
    - ls -la circleci-testing
dependencies:
  post:
    # Check which image we're using
    - lsb_release -a
    - docker build -t felicianotech/go-sample-webapp:$CIRCLE_SHA1 .
  # - sudo rm /etc/apt/sources.list.d/google*
  # - sudo apt-get update
test:
  override:
  #  - echo $MY_EVAR
    - echo $TEST_VAR
    - echo $PATH
    - sftp
    - sftp --help
    - docker run ubuntu /bin/echo 'Hello world'
    #- php test.php
    #- kubectl --version
deployment:
  production:
    branch: master
    commands:
#      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
      #- docker push felicianotech/go-sample-webapp:$CIRCLE_SHA1
      - VARTEST=birthday env | grep VARTEST
      - ls -la
notify:
  webhooks:
